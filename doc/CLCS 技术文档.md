# CLCS 技术文档

## 文件夹结构

**文件工作结构**

```
CLCS项目结构演示
   ├── 运行程序
   ├── history
   │   ├── user1
   │   └── user2
   └── option
       ├── language
       │   ├── standard.txt
       │   └── zh_CN.txt
       └── options.txt
```

```
history： 存放聊天的内容
option： 存放程序的一系列设置
```

**项目文件夹**

```
doc： 			存放一系列文档
include： 		存放头文件
resources： 		存放.cc文件
```



## 文档格式

**变量命名规范：**

1. 清楚明了的知道这个词在程序中的作用
2. 简洁，但不会让人误解
3. 采用小驼峰命名法



**语言文件格式：**

```
字符串1：字符串2					// 注释
```

```
字符串1：表示程序中的字符串
字符串2：表示显示的字符
//： 表示注释的开始，程序读到时，将不再继续读此行
```

**设置文档格式**

```
字符串1：字符串2					// 注释
字符串1：表示程序中的字符串
字符串2：表示显示的字符
//： 表示注释的开始，程序读到时，将不再继续读此行
```



**命令行指令格式**

```
[动作名字] [参数]
```

**信息流格式**

```
[流类型] [额外参数] [消息主体]
```

* RECALL

```
RECALL [消息]
```

* KEY_TEST
  * SEND：表示当前的消息是发送状态
  * RECV：表示当前的消息是接受状态

```
KEY_TEST SEND OK(加密信息)
KEY_TEST RECV OK
```

* TEXT_CHAT

```
TEXT_CHAT [目标UUID] [消息](使用目标的公钥加密)
```

* TEXT_SYS
  * USER_LIST

```
TEST_SYS USER_LIST [用户1的uuid 用户2的uuid ...]
```



## 类的说明

### `Init`类

作用：初始化整个系统， 承担了 **初始化各大模块** 和 **初始化工作文件夹** 的职责

设计模式： 单例设计模式

### `ReadFile`类

作用： 读取不同存储类型的文件

* 设置类型
* 语言类型
* 存储文件类型

设计模式：工厂模式

### `Log`类

作用：向一个指定的位置输出调试文件

设计模式：单例模式

```
%t：当前线程的id
%p：当前进程的id
%c：当前系统的时间
%m：程序运行的时间
%e：当前程序errno的值
```

## 后期优化

1. 使用`move`， `forword`等函数优化拷贝复制操作符
2. 添加系统请求限制， 防止请求过高导致服务器卡顿
2. 完善日志系统的输出功能
2. 使用set设置变量的时候， 同时会将记录记录下来
